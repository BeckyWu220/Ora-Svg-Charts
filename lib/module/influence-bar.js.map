{"version":3,"sources":["influence-bar.tsx"],"names":["React","View","Text","StyleSheet","findNodeHandle","palette","InfluenceBar","props","influence","range","color","gray_200","height","borderRadius","backgroundColor","gray_300","highlightedPercentage","Math","abs","offset","initialMarkPosition","x","y","width","zeroMarkerPosition","setZeroMarkerPosition","useState","valueMarkerPosition","setValueMarkerPosition","zeroMarker","useRef","highlightedBar","container","useEffect","current","measureLayout","flex","style","flexGrow","overflow","position","top","bottom","left","right","gray_500","styles","markerTextContainer","markerText","zeroMarkerText","create","gray_400","fontWeight","alignItems"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { View, Text, StyleSheet, findNodeHandle } from 'react-native';\nimport { palette } from './colors';\n\nexport interface InfluenceBarProps {\n  color?: string,\n  backgroundColor?: string,\n  influence: number,\n  range: number,\n  height?: number,\n  borderRadius?: number,\n  style?: object\n}\n\nexport default function InfluenceBar(props: InfluenceBarProps) {\n\n  const { \n    influence = 0, \n    range = 100, \n    color = palette.gray_200, \n    height = 16, \n    borderRadius = 8,\n    backgroundColor = palette.gray_300\n  } = props\n\n  const highlightedPercentage = `${Math.abs(influence) / (2 * Math.abs(range)) * 100}%`\n  \n  const offset = (Math.abs(range) - Math.abs(influence)) / 2 * Math.abs(range)\n\n  const initialMarkPosition = {\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0,\n  }\n\n  const [zeroMarkerPosition, setZeroMarkerPosition] = React.useState(initialMarkPosition)\n  const [valueMarkerPosition, setValueMarkerPosition] = React.useState(initialMarkPosition)\n\n  const zeroMarker = React.useRef()\n  const highlightedBar = React.useRef()\n  const container = React.useRef()\n\n  React.useEffect(() => {\n    zeroMarker.current.measureLayout(findNodeHandle(container.current),(x, y, width, height) => {\n      setZeroMarkerPosition({ x, y, width, height })\n    })\n    highlightedBar.current.measureLayout(findNodeHandle(container.current),(x, y, width, height) => {\n      setValueMarkerPosition({ x, y, width, height })\n    })\n  }, [influence])\n\n  return (\n    <View ref={container} style={{ flex: 1, ...props.style }}>\n      <View style={{ \n          flexGrow: 1, \n          height, \n          backgroundColor, \n          borderRadius, \n          overflow: 'hidden'\n        }}>\n        {/* Highlighted Bar */}\n        <View\n          ref={highlightedBar}\n          style={{\n            position: 'absolute', \n            top: 0, \n            bottom: 0, \n            backgroundColor: color,\n            left: influence < 0 ? (`${offset < 100 ? offset : 100}%`) : '50%', \n            right: influence > 0 ? `${offset < 100 ? offset : 100}%` : '50%', \n            width: highlightedPercentage \n          }}\n        />\n      </View>\n      {/* Zero Marker and Zero Marker Text */}\n      <View ref={zeroMarker} style={{ position: 'absolute', left: '50%', top: -props.height * 0.5 / 2, width: 2, height: props.height * 1.5, backgroundColor: palette.gray_500, overflow: 'visible' }}></View>\n      <View style={[styles.markerTextContainer, { left: zeroMarkerPosition.x - 10 }]}>\n        <Text style={[styles.markerText, styles.zeroMarkerText]}>0</Text>\n      </View>\n      {/* Influence Marker Text */}\n      <View style={[styles.markerTextContainer, { left: valueMarkerPosition.x - 10 + ( influence > 0 && valueMarkerPosition.width) }]}>\n        <Text style={styles.markerText}>{influence}</Text>\n      </View>\n    </View>\n  )\n}\n\nconst styles = StyleSheet.create({\n  zeroMarkerText: {\n    color: palette.gray_500\n  },\n  markerText: {\n    color: palette.gray_400,\n    fontWeight: 'bold'\n  },\n  markerTextContainer: {\n    position: 'absolute', \n    top: 14, \n    width: 20, \n    overflow: 'visible', \n    alignItems: 'center'\n  }\n})"]}
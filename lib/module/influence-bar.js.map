{"version":3,"sources":["influence-bar.tsx"],"names":["React","View","Text","InfluenceBar","props","highlightedPercentage","Math","abs","influence","range","offset","zeroMarkerPosition","setZeroMarkerPosition","useState","x","y","width","height","valueMarkerPosition","setValueMarkerPosition","zeroMarker","useRef","highlightedBar","useEffect","current","measure","console","tron","log","style","flexGrow","backgroundColor","borderRadius","overflow","position","left","right","top","bottom","color","alignItems"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { View, Text, UIManager } from 'react-native';\n\nexport interface InfluenceBarProps {\n  color?: string,\n  backgroundColor?: string,\n  influence: number,\n  range: number,\n  height?: number,\n  style?: object\n}\n\nexport default function InfluenceBar(props: InfluenceBarProps) {\n  const highlightedPercentage = Math.abs(props.influence) / (2 * Math.abs(props.range || 100))\n  // console.tron.log('?', highlightedPercentage * 100 + '%')\n  \n  const offset = (Math.abs(props.range || 100) - Math.abs(props.influence)) / 2 * (Math.abs(props.range || 100))\n  // console.tron.log('offset', offset + '%')\n\n  const [zeroMarkerPosition, setZeroMarkerPosition] = React.useState({\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0,\n  })\n\n  const [valueMarkerPosition, setValueMarkerPosition] = React.useState({\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0,\n  })\n\n  const zeroMarker = React.useRef()\n  const highlightedBar = React.useRef()\n\n  React.useEffect(() => {\n    // console.tron.log('useEffect', props.influence)\n    zeroMarker.current.measure((x, y, width, height) => {\n      // console.tron.log('measure: ', x, y, width, height)\n      setZeroMarkerPosition({ x, y, width, height })\n    })\n    highlightedBar.current.measure((x, y, width, height) => {\n      console.tron.log('!!!measure: ', x, y, width, height)\n      setValueMarkerPosition({ x, y, width, height })\n    })\n  }, [props.influence])\n\n  //console.tron.log('highlighted percentage:', highlightedPercentage)\n  return (\n    <View style={{ width: '100%', ...props.style }}>\n      <View style={{ flexGrow: 1, height: props.height || 16, backgroundColor: props.backgroundColor || '#e3e3e3', borderRadius: 8, overflow: 'hidden'}}>\n        <View\n          ref={highlightedBar}\n          style={{\n            position: 'absolute', \n            left: props.influence < 0 ? (`${offset < 100 ? offset : 100}%`) : '50%', \n            right: props.influence > 0 ? `${offset < 100 ? offset : 100}%` : '50%', \n            top: 0, \n            bottom: 0, \n            backgroundColor: props.color || '#63819B', \n            width: `${highlightedPercentage*100}%` }}\n        />\n      </View>\n      <View ref={zeroMarker} style={{ position: 'absolute', left: '50%', top: -props.height * 0.5 / 2, width: 2, height: props.height * 1.5, backgroundColor: 'red', overflow: 'visible' }}></View>\n      <View style={{ position: 'absolute', left: zeroMarkerPosition.x - 10, top: 20, width: 20, backgroundColor: 'red', overflow: 'visible', alignItems: 'center' }}>\n        <Text>0</Text>\n      </View>\n      { props.influence < 0 &&\n        <View style={{ position: 'absolute' }}>\n          <View style={{ position: 'absolute', left: valueMarkerPosition.x, top: -props.height * 0.5 / 2, width: 2, height: props.height * 1.5, backgroundColor: 'green', overflow: 'visible' }}></View>\n          <View style={{ position: 'absolute', left: valueMarkerPosition.x - 10, top: 20, width: 20, backgroundColor: 'green', overflow: 'visible', alignItems: 'center' }}>\n              <Text>{props.influence}</Text>\n          </View>\n        </View>\n      }\n      {\n        props.influence > 0 && \n        <View style={{ position: 'absolute' }}>\n          <View style={{ position: 'absolute', left: valueMarkerPosition.x + valueMarkerPosition.width, top: -props.height * 0.5 / 2, width: 2, height: props.height * 1.5, backgroundColor: 'green', overflow: 'visible' }}></View>\n          <View style={{ position: 'absolute', left: valueMarkerPosition.x + valueMarkerPosition.width - 10, top: 20, width: 20, backgroundColor: 'green', overflow: 'visible', alignItems: 'center' }}>\n              <Text>{props.influence}</Text>\n          </View>\n        </View>\n      }\n    </View>\n  )\n}"]}
{"version":3,"sources":["amplitude-range.tsx"],"names":["React","View","Text","StyleSheet","findNodeHandle","palette","AmplitudeRange","props","min","max","minAmplitude","maxAmplitude","color","gray_200","height","borderRadius","backgroundColor","gray_300","highlightedPercentage","Math","abs","offset","initialMarkPosition","x","y","width","valueMarkerPosition","setValueMarkerPosition","useState","highlightedBar","useRef","container","measureHighlightedBar","current","measureLayout","minValueMarkerPositionX","maxValueMarkerPositionX","setMinMarkerPositionX","setMaxMarkerPositionX","useEffect","minMarkerPositionX","maxMarkerPositionX","flex","style","flexGrow","overflow","position","top","bottom","left","styles","markerTextContainer","markerText","create","gray_400","fontWeight","alignItems"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { View, Text, StyleSheet, findNodeHandle } from 'react-native';\nimport { palette } from './colors';\n\nexport interface AmplitudeRangeProps {\n  color?: string,\n  backgroundColor?: string,\n  min: number,\n  max: number,\n  minAmplitude: number,\n  maxAmplitude: number,\n  influence: number,\n  range: number,\n  height?: number,\n  borderRadius?: number,\n  style?: object\n}\n\nexport default function AmplitudeRange(props: AmplitudeRangeProps) {\n\n  const { \n    min = 0, \n    max = 100, \n    minAmplitude = 0, \n    maxAmplitude = 100, \n    color = palette.gray_200, \n    height = 16, \n    borderRadius = 8,\n    backgroundColor = palette.gray_300\n  } = props\n\n  const highlightedPercentage = `${Math.abs(maxAmplitude - minAmplitude) / Math.abs(max-min) * 100}%`\n  \n  const offset = `${Math.abs(minAmplitude - min) /Math.abs(max-min) * 100}%`\n\n  const initialMarkPosition = {\n    x: null,\n    y: null,\n    width: 0,\n    height: 0,\n  }\n\n  const [valueMarkerPosition, setValueMarkerPosition] = React.useState(initialMarkPosition)\n\n  const highlightedBar = React.useRef()\n  const container = React.useRef()\n\n  const measureHighlightedBar = () => {\n    highlightedBar.current && highlightedBar.current.measureLayout(findNodeHandle(container.current), (x, y, width, height) => {\n      setValueMarkerPosition({ x, y, width, height })\n      let minValueMarkerPositionX = x - 10\n      let maxValueMarkerPositionX = x - 10 + width\n      if (maxValueMarkerPositionX - minValueMarkerPositionX <= 40) {\n        minValueMarkerPositionX = x + width * 0.5 - 20\n        maxValueMarkerPositionX = x + width * 0.5\n      }\n      setMinMarkerPositionX(minValueMarkerPositionX)\n      setMaxMarkerPositionX(maxValueMarkerPositionX)\n    })\n  }\n\n  React.useEffect(() => {\n    measureHighlightedBar()\n  }, [ minAmplitude, maxAmplitude ])\n\n  const [minMarkerPositionX, setMinMarkerPositionX] = React.useState(null)\n  const [maxMarkerPositionX, setMaxMarkerPositionX] = React.useState(null)\n\n  return (\n    <View\n      ref={container}\n      style={{ flex: 1, ...props.style }}\n      onLayout={() => {\n        measureHighlightedBar()\n      }}\n    >\n      <View style={{ \n          flexGrow: 1, \n          height, \n          backgroundColor, \n          borderRadius, \n          overflow: 'hidden'\n        }}>\n        {/* Highlighted Bar */}\n        <View\n          ref={highlightedBar}\n          style={{\n            position: 'absolute', \n            top: 0, \n            bottom: 0, \n            backgroundColor: color,\n            left: offset, \n            width: highlightedPercentage\n          }}\n        />\n      </View>\n      <View style={[styles.markerTextContainer, { left: minMarkerPositionX }]}>\n        { valueMarkerPosition.x !== null && <Text style={styles.markerText}>{minAmplitude}</Text> }\n      </View>\n      <View style={[styles.markerTextContainer, { left: maxMarkerPositionX }]}>\n        { valueMarkerPosition.x !== null && <Text style={styles.markerText}>{maxAmplitude}</Text> }\n      </View>\n    </View>\n  )\n}\n\nconst styles = StyleSheet.create({\n  markerText: {\n    color: palette.gray_400,\n    fontWeight: 'bold'\n  },\n  markerTextContainer: {\n    position: 'absolute', \n    top: 14, \n    width: 20, \n    overflow: 'visible', \n    alignItems: 'center'\n  }\n})"]}